<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="../../favicon.ico">

  <title>Fellow</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/splash.css" media="screen" title="no title" charset="utf-8">

</head>

<body>

  <div class="site-wrapper">

    <div class="site-wrapper-inner">

      <div class="cover-container">
        <input class="create-notification" placeholder="Send a notification :)">
        </input>
        <button class="submit-notification">Go!</button>
        <div id="notification">0</div>



        <div class="masthead clearfix">
          <div class="inner">
            <h3 class="masthead-brand"><a href="/">Fellows</a></h3>
            <nav>
              <ul class="nav masthead-nav">

                <li><a href="/collections">Collections</a></li>
                <li><a href="/login">login</a></li>
              </ul>
            </nav>
          </div>
        </div>

        <div class="inner cover">

          <h1 class="cover-heading">Welcome to Fellows</h1>
          <p class="lead">A high-end clothing subscription service for men who have the desire to be stylish with minimum effort involved.</p>          <p class="lead">
            <a href="/memberships" class="btn btn-lg btn-warning">Membership</a>

          </p>
          <p>How it works?</p>
           <ul>
             <li>
               Start by creating an account and complete the personal profile building upon the favourites you selected in your application. Then simply pick the collection(s) that satisfy your requirements and you would like to experience.
             </li>
             <li>
               Receive an outfit to wear on loan that is a styled based on your preference.
             </li>
             <li>
               Return by cut off to get your next pack, shipping is free both ways. Our stylist will prepare for your next pack.
             </li>
           </ul>
          </p>
        </div>

        <div class="mastfoot">
          <div class="inner">

          </div>
        </div>

      </div>

    </div>

  </div>

  <script src="//js.pusher.com/3.0/pusher.min.js"></script>
  <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
  <script>
  var counter = 0
    var pusher = new Pusher('f5049b557c6eb19e1ae9');
    // do something with our `data`
    //subscribe to our notifications channel
    var notificationsChannel = pusher.subscribe('notifications');

    notificationsChannel.bind('new_notification', function(notification){
      console.log(notification,'----------------');
      console.log(notification.counter);
        var message = notification.counter;
        toastr.success(message);
        // $('div.notification').text(message);
        increment(notification);

    });



    function increment(notification){
    var increment = document.getElementById('notification');
    var counter = notification.counter
    increment.innerHTML = counter;
    console.log(notification);
    // var addOne = parseInt('notification')+1;
    //
    // return addOne.toString();

    }

    var sendNotification = function() {

      // get the contents of the input
      var text = $('input.create-notification').val();

      // POST to our server
      $.post('/notification/'+ text + '/').success(function() {
        console.log('Notification sent!');
      });
    };

    $('button.submit-notification').on('click', sendNotification);
  </script>

  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
</body>

</html>
